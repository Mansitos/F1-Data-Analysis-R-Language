"0","# Building historical data for constructors (partecipation in seasons)"
"0","years=c(1950:2020)"
"0",""
"0","input_data2 = full_join(races_year,results,by=""raceId"") %>% select(year,constructorId) %>% filter(year>=1950)"
"0","input_data2 = unique(input_data2)"
"0",""
"0","constructors_names = constr_stats %>% select(name,constructorId)"
"0",""
"0","history_data = tibble()"
"0",""
"0","for(i in years){"
"0","  data = input_data2 %>% filter(year <= i)"
"0","  row = data %>% count(constructorId) %>% rename(seasons_held=n) %>% mutate(year=i)"
"0","  history_data = rbind(history_data,row)"
"0","}"
"0",""
"0","# adding constr name to historical data"
"0","history_data <-  right_join(constructors_names,history_data,by=""constructorId"")"
"0",""
"0","#filter "
"0","n = 10"
"0","ok_constr = constr_stats %>% arrange(desc(held_seasons))"
"0","ok_constr = ok_constr[0:n,]"
"0",""
"0","history_data_filtered = inner_join(ok_constr,history_data,by=""name"") %>% mutate(constructorId=constructorId.x) %>% select(-constructorId.y)"
"0",""
"0","history_data_filtered = history_data_filtered %>% mutate(label=paste(name,""-"",held_seasons))"
