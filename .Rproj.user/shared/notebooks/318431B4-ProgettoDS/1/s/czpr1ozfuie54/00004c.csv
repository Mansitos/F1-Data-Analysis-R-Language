"0","# Building historical data for constructors (partecipation in seasons)"
"0","years=c(1958:2020)"
"0",""
"0","input_data = full_join(races_year,constrStand,by=""raceId"") %>% select(-wins,-points,-constructorStandingsId,-position,-positionText) %>% select(-raceId) %>% filter(year>=1958)"
"0","input_data = unique(input_data)"
"0",""
"0","constructors_names = constr_stats %>% select(name,constructorId)"
"0",""
"0","history_data = tibble()"
"0",""
"0","for(i in years){"
"0","  data = input_data %>% filter(year <= i)"
"0","  row = data %>% count(constructorId) %>% rename(seasons_held=n) %>% mutate(year=i)"
"0","  history_data = rbind(history_data,row)"
"0","}"
"0",""
"0","# adding constr name to historical data"
"0","history_data <-  right_join(constructors_names,history_data,by=""constructorId"")"
"0",""
"0","#filter "
"0","n = 10"
"0","ok_constr = constr_stats %>% arrange(desc(held_seasons))"
"0","ok_constr = ok_constr[0:n,]"
"0",""
"0","history_data_filtered = inner_join(ok_constr,history_data,by=""name"") %>% mutate(constructorId=constructorId.x) %>% select(-constructorId.y)"
"0",""
"0","gif_data = history_data_filtered  %>% ggplot(aes(x=year,y=seasons_held,group=constructorId,color=name))+"
"0","    geom_line(size=1.3) +"
"0","    geom_point(size=2.3) +"
"0","    ggtitle(""Historical evolution of n° held seasons for top 10 constructors who participated the most"") +"
"0","    ylab(""n° held seasons"") +"
"0","    xlab(""Year"") +"
"0","    transition_reveal(year) +"
"0","    scale_y_continuous(breaks = pretty(history_data_filtered$held_seasons, n = 10)) +"
"0","    scale_x_continuous(breaks = pretty(history_data_filtered$year, n = 10))"
"0",""
"0","animate(gif_data, duration = 12, fps = 20, width = 1000, height = 500, renderer = gifski_renderer())"
"1","Frame 1 (0%)"
"1","Frame 2 (0%)"
"1","Frame 3 (1%)"
"1","Frame 4 (1%)"
"1","Frame 5 (2%)"
"1","Frame 6 (2%)"
"1","Frame 7 (2%)"
"1","Frame 8 (3%)"
"1","Frame 9 (3%)"
"1","Frame 10 (4%)"
"1","Frame 11 (4%)"
"1","Frame 12 (5%)"
"1","Frame 13 (5%)"
"1","Frame 14 (5%)"
"1","Frame 15 (6%)"
"1","Frame 16 (6%)"
"1","Frame 17 (7%)"
"1","Frame 18 (7%)"
"1","Frame 19 (7%)"
"1","Frame 20 (8%)"
"1","Frame 21 (8%)"
"1","Frame 22 (9%)"
"1","Frame 23 (9%)"
"1","Frame 24 (10%)"
"1","Frame 25 (10%)"
"1","Frame 26 (10%)"
"1","Frame 27 (11%)"
"1","Frame 28 (11%)"
"1","Frame 29 (12%)"
"1","Frame 30 (12%)"
"1","Frame 31 (12%)"
"1","Frame 32 (13%)"
"1","Frame 33 (13%)"
"1","Frame 34 (14%)"
"1","Frame 35 (14%)"
"1","Frame 36 (15%)"
"1","Frame 37 (15%)"
"1","Frame 38 (15%)"
"1","Frame 39 (16%)"
"1","Frame 40 (16%)"
"1","Frame 41 (17%)"
"1","Frame 42 (17%)"
"1","Frame 43 (17%)"
"1","Frame 44 (18%)"
"1","Frame 45 (18%)"
"1","Frame 46 (19%)"
"1","Frame 47 (19%)"
"1","Frame 48 (20%)"
"1","Frame 49 (20%)"
"1","Frame 50 (20%)"
"1","Frame 51 (21%)"
"1","Frame 52 (21%)"
"1","Frame 53 (22%)"
"1","Frame 54 (22%)"
"1","Frame 55 (22%)"
"1","Frame 56 (23%)"
"1","Frame 57 (23%)"
"1","Frame 58 (24%)"
"1","Frame 59 (24%)"
"1","Frame 60 (25%)"
"1","Frame 61 (25%)"
"1","Frame 62 (25%)"
"1","Frame 63 (26%)"
"1","Frame 64 (26%)"
"1","Frame 65 (27%)"
"1","Frame 66 (27%)"
"1","Frame 67 (27%)"
"1","Frame 68 (28%)"
"1","Frame 69 (28%)"
"1","Frame 70 (29%)"
"1","Frame 71 (29%)"
"1","Frame 72 (30%)"
"1","Frame 73 (30%)"
"1","Frame 74 (30%)"
"1","Frame 75 (31%)"
"1","Frame 76 (31%)"
"1","Frame 77 (32%)"
"1","Frame 78 (32%)"
"1","Frame 79 (32%)"
"1","Frame 80 (33%)"
"1","Frame 81 (33%)"
"1","Frame 82 (34%)"
"1","Frame 83 (34%)"
"1","Frame 84 (35%)"
"1","Frame 85 (35%)"
"1","Frame 86 (35%)"
"1","Frame 87 (36%)"
"1","Frame 88 (36%)"
"1","Frame 89 (37%)"
"1","Frame 90 (37%)"
"1","Frame 91 (37%)"
"1","Frame 92 (38%)"
"1","Frame 93 (38%)"
"1","Frame 94 (39%)"
"1","Frame 95 (39%)"
"1","Frame 96 (40%)"
"1","Frame 97 (40%)"
"1","Frame 98 (40%)"
"1","Frame 99 (41%)"
"1","Frame 100 (41%)"
"1","Frame 101 (42%)"
"1","Frame 102 (42%)"
"1","Frame 103 (42%)"
"1","Frame 104 (43%)"
"1","Frame 105 (43%)"
"1","Frame 106 (44%)"
"1","Frame 107 (44%)"
"1","Frame 108 (45%)"
"1","Frame 109 (45%)"
"1","Frame 110 (45%)"
"1","Frame 111 (46%)"
"1","Frame 112 (46%)"
"1","Frame 113 (47%)"
"1","Frame 114 (47%)"
"1","Frame 115 (47%)"
"1","Frame 116 (48%)"
"1","Frame 117 (48%)"
"1","Frame 118 (49%)"
"1","Frame 119 (49%)"
"1","Frame 120 (50%)"
"1","Frame 121 (50%)"
"1","Frame 122 (50%)"
"1","Frame 123 (51%)"
"1","Frame 124 (51%)"
"1","Frame 125 (52%)"
"1","Frame 126 (52%)"
"1","Frame 127 (52%)"
"1","Frame 128 (53%)"
"1","Frame 129 (53%)"
"1","Frame 130 (54%)"
"1","Frame 131 (54%)"
"1","Frame 132 (55%)"
"1","Frame 133 (55%)"
"1","Frame 134 (55%)"
"1","Frame 135 (56%)"
"1","Frame 136 (56%)"
"1","Frame 137 (57%)"
"1","Frame 138 (57%)"
"1","Frame 139 (57%)"
"1","Frame 140 (58%)"
"1","Frame 141 (58%)"
"1","Frame 142 (59%)"
"1","Frame 143 (59%)"
"1","Frame 144 (60%)"
"1","Frame 145 (60%)"
"1","Frame 146 (60%)"
"1","Frame 147 (61%)"
"1","Frame 148 (61%)"
"1","Frame 149 (62%)"
"1","Frame 150 (62%)"
"1","Frame 151 (62%)"
"1","Frame 152 (63%)"
"1","Frame 153 (63%)"
"1","Frame 154 (64%)"
"1","Frame 155 (64%)"
"1","Frame 156 (65%)"
"1","Frame 157 (65%)"
"1","Frame 158 (65%)"
"1","Frame 159 (66%)"
"1","Frame 160 (66%)"
"1","Frame 161 (67%)"
"1","Frame 162 (67%)"
"1","Frame 163 (67%)"
"1","Frame 164 (68%)"
"1","Frame 165 (68%)"
"1","Frame 166 (69%)"
"1","Frame 167 (69%)"
"1","Frame 168 (70%)"
"1","Frame 169 (70%)"
"1","Frame 170 (70%)"
"1","Frame 171 (71%)"
"1","Frame 172 (71%)"
"1","Frame 173 (72%)"
"1","Frame 174 (72%)"
"1","Frame 175 (72%)"
"1","Frame 176 (73%)"
"1","Frame 177 (73%)"
"1","Frame 178 (74%)"
"1","Frame 179 (74%)"
"1","Frame 180 (75%)"
"1","Frame 181 (75%)"
"1","Frame 182 (75%)"
"1","Frame 183 (76%)"
"1","Frame 184 (76%)"
"1","Frame 185 (77%)"
"1","Frame 186 (77%)"
"1","Frame 187 (77%)"
"1","Frame 188 (78%)"
"1","Frame 189 (78%)"
"1","Frame 190 (79%)"
"1","Frame 191 (79%)"
"1","Frame 192 (80%)"
"1","Frame 193 (80%)"
"1","Frame 194 (80%)"
"1","Frame 195 (81%)"
"1","Frame 196 (81%)"
"1","Frame 197 (82%)"
"1","Frame 198 (82%)"
"1","Frame 199 (82%)"
"1","Frame 200 (83%)"
"1","Frame 201 (83%)"
"1","Frame 202 (84%)"
"1","Frame 203 (84%)"
"1","Frame 204 (85%)"
"1","Frame 205 (85%)"
"1","Frame 206 (85%)"
"1","Frame 207 (86%)"
"1","Frame 208 (86%)"
"1","Frame 209 (87%)"
"1","Frame 210 (87%)"
"1","Frame 211 (87%)"
"1","Frame 212 (88%)"
"1","Frame 213 (88%)"
"1","Frame 214 (89%)"
"1","Frame 215 (89%)"
"1","Frame 216 (90%)"
"1","Frame 217 (90%)"
"1","Frame 218 (90%)"
"1","Frame 219 (91%)"
"1","Frame 220 (91%)"
"1","Frame 221 (92%)"
"1","Frame 222 (92%)"
"1","Frame 223 (92%)"
"1","Frame 224 (93%)"
"1","Frame 225 (93%)"
"1","Frame 226 (94%)"
"1","Frame 227 (94%)"
"1","Frame 228 (95%)"
"1","Frame 229 (95%)"
"1","Frame 230 (95%)"
"1","Frame 231 (96%)"
"1","Frame 232 (96%)"
"1","Frame 233 (97%)"
"1","Frame 234 (97%)"
"1","Frame 235 (97%)"
"1","Frame 236 (98%)"
"1","Frame 237 (98%)"
"1","Frame 238 (99%)"
"1","Frame 239 (99%)"
"1","Frame 240 (100%)"
"1","
Finalizing encoding..."
"1"," done!
"
"0","anim_save(""test.gif"")"
"0",""
"0",""
